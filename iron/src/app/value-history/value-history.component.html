<blu-modal
    [title]="TEXTS.MODAL_TITLE"
    [subtitle]="TEXTS.MODAL_SUBTITLE"
    [outline]="outline"
>
    <div *ngIf="isLoading else tableRows" class="value-history-loading">
        <mat-progress-bar mode="query"></mat-progress-bar>
    </div>
    <ng-template #tableRows>
        <div *ngFor="let entry of (entries$ | async)">
            <div class="row value-history-entry-wrapper">
                <div class="col-5">
                    <div class="value-history-entry value-history-row-input-left">
                        <blu-text type="primary">{{ entry.date }}</blu-text>
                    </div>
                </div>
                <div class="col-5">
                    <div class="value-history-entry">
                        <blu-text type="primary">$ {{ entry.value.toLocaleString() }}</blu-text>
                    </div>
                </div>
                <div class="col-2 align-self-center">
                    <div class="value-history-entry-delete">
                        <blu-button 
                            [iconOnly]="true" 
                            feedback="error" 
                            iconSize="20"
                            iconName="trash"
                            type="tertiary" 
                            [fullWidth]="true"
                            (click)="onDeleteEntry(entry)"
                        ></blu-button>
                    </div>
                </div>
            </div>
        </div>
        <div *ngFor="let entry of (newEntries$ | async)">
            <div class="row value-history-entry-wrapper">
                <div class="col-5">
                    <div class="value-history-entry value-history-row-input-left">
                        <blu-text type="primary">{{ entry.date }}</blu-text>
                    </div>
                </div>
                <div class="col-5">
                    <div class="value-history-entry value-history-row-input-right">
                        <blu-text type="primary">$ {{ entry.value.toLocaleString() }}</blu-text>
                    </div>
                </div>
                <div class="col-2 align-self-center">
                    <div class="value-history-entry-delete value-history-row-input-right">
                        <blu-button 
                            [iconOnly]="true" 
                            iconSize="20"
                            feedback="error" 
                            iconName="trash"
                            type="tertiary" 
                            [fullWidth]="true"
                            (click)="onDeleteEntry(entry)"
                        ></blu-button>
                    </div>
                </div>
            </div>
        </div>
    <div class="row">
        <div class="col-5">
            <div class="value-history-row-input-left">
                <blu-input 
                    [fullWidth]="true"
                    appearance="cell"
                    [feedbackType]="FeedbackType.ERROR"
                    placeholder="Date (mm/yyyy)" 
                    type="DATE"
                    #date
                    (keydown.enter)="onAddEntry()"
                ></blu-input>
            </div>
        </div>
        <div class="col-5">
            <div class="value-history-row-input-right">
                <blu-input 
                    [fullWidth]="true" 
                    appearance="cell"
                    [feedbackType]="FeedbackType.ERROR"
                    placeholder="Value" 
                    type="NUMBER"
                    #value
                    (keydown.enter)="onAddEntry()"
                ></blu-input>
            </div>
        </div>
        <div class="col-2 align-self-center">
            <div class="value-history-entry-delete value-history-row-input-right">
                <blu-button 
                    [iconOnly]="true" 
                    iconSize="20"
                    iconName="plus" 
                    type="tertiary"
                    [fullWidth]="true"
                    (click)="onAddEntry()"
                ></blu-button>
            </div>
        </div>
    </div>
    </ng-template>
</blu-modal>