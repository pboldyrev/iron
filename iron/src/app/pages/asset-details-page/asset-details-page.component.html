<div class="row justify-content-center">
    <div class="col-11 col-sm-10 col-xl-8">
        <div class="asset-details-page-wrapper justify-content-center">
            <blu-modal>
                <div class="asset-details-page-button-wrapper">
                    <blu-button type="primary" iconName="backArrow" (click)="onBack()">Back</blu-button>
                    <blu-button 
                        *ngIf="(asset$ | async)?.assetType === AssetType.Vehicle || (asset$ | async)?.assetType === AssetType.Stock"
                        type="secondary" 
                        [iconOnly]="true" 
                        iconName="spinner" 
                        (click)="onRefresh()" 
                        tooltip="Refresh data"
                    ></blu-button>
                </div>
                <div class="asset-details-page-top-row">
                    <blu-heading
                        size="medium"
                        [bold]="true"
                        [subheading]="displayAssetName"
                        subheadingPosition="top"
                        *ngIf="!(isDetailsLoading$ | async)"
                        [isNumber]="true"
                    >
                        {{ displayAssetValue }}
                    </blu-heading>
                </div>
                <div *ngIf="(isDetailsLoading$ | async) || (isValuesLoading$ | async)" class="asset-details-loading-wrapper">
                    <app-loading-state></app-loading-state>
                </div>
                <mat-tab-group 
                    [ngClass]="{
                        'asset-details-page-hidden': isDetailsLoading$ | async
                    }" 
                    [dynamicHeight]="true"
                    (selectedTabChange)="onTabClick($event)"
                >
                    <mat-tab label="Historical value">
                        <app-value-history
                            [assetValues]="(assetValues$ | async) ?? []"
                            [assetId]="assetId"
                            [isLoading$]="isDetailsLoading$"
                            [isAssetCustom]="(asset$ | async)?.assetType === AssetType.Custom"
                            #valueHistory
                        ></app-value-history>
                    </mat-tab>
                    <mat-tab label="Future projection">
                        <app-future-projection
                            [assetName]="(asset$ | async)?.assetName ?? ''"
                            [assetValues]="(assetValues$ | async) ?? []"
                            #futureProjection
                        ></app-future-projection>
                    </mat-tab>
                    <mat-tab label="Asset details">
                        <app-asset-more-details
                            [ngClass]="{
                                'asset-details-page-hidden': isDetailsLoading$ | async
                            }"
                            [asset$]="asset$"
                        ></app-asset-more-details>
                    </mat-tab>
                </mat-tab-group>
            </blu-modal>
        </div>
    </div>
</div>