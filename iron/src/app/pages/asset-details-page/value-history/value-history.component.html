<div class="value-history-wrapper">
    <blu-modal
        [noPadding]="true"
        [outline]="false"
    >
    <mat-table #table [dataSource]="assetValues">
        <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef>
                <blu-input 
                    [fullWidth]="true"
                    appearance="cell"
                    [feedbackType]="FeedbackType.ERROR"
                    placeholder="Date (mm/yyyy)" 
                    type="DATE"
                    #date
                    (keydown.enter)="onAddEntry()"
                ></blu-input>
            </mat-header-cell>
            <mat-cell *matCellDef="let entry">
                <blu-text type="primary">{{getDateString(entry?.timestamp ?? 0)}}</blu-text>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="value">
            <mat-header-cell *matHeaderCellDef>
                <blu-input 
                    [fullWidth]="true" 
                    appearance="cell"
                    [feedbackType]="FeedbackType.ERROR"
                    placeholder="Enter value" 
                    type="NUMBER"
                    direction="rtl"
                    #value
                    (keydown.enter)="onAddEntry()"
                ></blu-input>
            </mat-header-cell>
            <mat-cell *matCellDef="let entry">
                <blu-text type="primary">${{entry?.value?.toLocaleString('en-US', {maximumFractionDigits: 2, minimumFractionDigits: 2}) ?? 0}}</blu-text>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="action">
            <mat-header-cell *matHeaderCellDef>
                <blu-button [iconOnly]="true" iconName="plus" type="tertiary" (click)="onAddEntry()"></blu-button>
            </mat-header-cell>
            <mat-cell *matCellDef="let entry">
                <blu-button [iconOnly]="true" iconName="kebab" type="tertiary" [matMenuTriggerFor]="appMenu"></blu-button>
                <mat-menu #appMenu="matMenu" xPosition="before" yPosition="below">
                    <div mat-menu-item (click)="onDeleteEntry(entry)"><blu-text type="error" size="small">Delete</blu-text></div>
                </mat-menu>
            </mat-cell>
        </ng-container>

        <mat-row *matRowDef="let row; columns: DISPLAYED_COLUMNS;"></mat-row>
        <mat-footer-row *matHeaderRowDef="DISPLAYED_COLUMNS"></mat-footer-row>
    </mat-table>
    </blu-modal>
</div>