<div class="value-history-wrapper">
    <mat-table #table [dataSource]="assetValues">
        <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef>
                Date
            </mat-header-cell>
            <mat-cell *matCellDef="let entry">
                <blu-text type="primary">{{getDateString(entry?.timestamp ?? 0)}}</blu-text>
            </mat-cell>
            <mat-footer-cell *matFooterCellDef>
                <blu-input 
                    [fullWidth]="true"
                    appearance="cell"
                    [feedbackType]="FeedbackType.ERROR"
                    placeholder="Date (mm/yyyy)" 
                    type="DATE"
                    #date
                    (keydown.enter)="onAddEntry()"
                ></blu-input>
            </mat-footer-cell>
        </ng-container>

        <ng-container matColumnDef="value">
            <mat-header-cell *matHeaderCellDef>
                Value
            </mat-header-cell>
            <mat-cell *matCellDef="let entry">
                <blu-text type="primary" [isNumber]="true">${{entry?.value?.toLocaleString('en-US', {maximumFractionDigits: 2, minimumFractionDigits: 2}) ?? 0}}</blu-text>
            </mat-cell>
            <mat-footer-cell *matFooterCellDef>
                <blu-input 
                    [fullWidth]="true" 
                    appearance="cell"
                    [feedbackType]="FeedbackType.ERROR"
                    placeholder="Enter value" 
                    type="NUMBER"
                    direction="rtl"
                    #value
                    (keydown.enter)="onAddEntry()"
                ></blu-input>
            </mat-footer-cell>
        </ng-container>

        <ng-container matColumnDef="action">
            <mat-header-cell *matHeaderCellDef>
            </mat-header-cell>
            <mat-cell *matCellDef="let entry">
                <blu-button [iconOnly]="true" iconName="kebab" type="tertiary" [matMenuTriggerFor]="appMenu"></blu-button>
                <mat-menu #appMenu="matMenu" xPosition="before" yPosition="below">
                    <div mat-menu-item [disableRipple]="true" (click)="onDeleteEntry(entry)"><blu-text type="error" size="small">Delete</blu-text></div>
                </mat-menu>
            </mat-cell>
            <mat-footer-cell *matFooterCellDef>
                <blu-button [iconOnly]="true" iconName="plus" type="tertiary" (click)="onAddEntry()"></blu-button>
            </mat-footer-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="DISPLAYED_COLUMNS"></mat-header-row>
        <mat-row *matRowDef="let row; columns: DISPLAYED_COLUMNS;"></mat-row>
        <mat-footer-row *matFooterRowDef="DISPLAYED_COLUMNS"></mat-footer-row>
    </mat-table>
</div>