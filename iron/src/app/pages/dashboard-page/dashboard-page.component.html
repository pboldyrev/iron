<app-confirmation-popup
  title="Log out?"
  subtitle="Just confirming it wasn't a misclick."
  confirmText="Yes, log out"
  size="medium"
  (confirmed)="onConfirmLogOut()"
  #logOutConfirmPopup
></app-confirmation-popup>
<app-add-asset-popup
    #addAssetPopup
></app-add-asset-popup>
<div *ngIf="(isNetworthLoading$ | async) && (isAssetsLoading$ | async)" class="dashboard-side-loader-wrapper">
    <app-loading-state></app-loading-state>
</div>
<div class="row dashboard-wrapper">
    <div class="col-lg-5 col-sm-12">
        <div class="dashboard-side-wrapper">
            <div *ngIf="(isNetworthLoading$ | async)" class="dashboard-side-loader-wrapper">
                <blu-spinner size="50"></blu-spinner>
            </div>
            <div class="dashboard-networth-wrapper" [hidden]="(isNetworthLoading$ | async)">
                <app-networth
                    [totalNetworth]="totalNetworth"
                ></app-networth>
                <app-value-change
                    [timeframes]="networthTimeframes"
                ></app-value-change>
            </div>
            <div class="dashboard-networth-chart-wrapper"
                [hidden]="(isNetworthLoading$ | async)">
                <canvas id="dashboardChart">{{ dashboardChart }}</canvas>
            </div>
        </div>
    </div>
<div class="col-lg-7 col-sm-12 dashboard-content-wrapper">
    <div class="row">
        <div class="col-12 dashboard-actions-wrapper">
            <blu-button type="primary" iconName="plus" (click)="onAddAsset()" tooltip="Add asset">
                {{ TEXTS.BTN_PRIMARY_CTA }}
            </blu-button>
            <blu-button type="secondary" [iconOnly]="true" iconName="gear" (click)="onSettings()" tooltip="Settings page"></blu-button>
            <blu-button type="secondary" [iconOnly]="true" iconName="spinner" (click)="onRefresh()" tooltip="Refresh data"></blu-button>
            <blu-button type="secondary" [iconOnly]="true" iconName="signOut" (click)="onLogOut()" tooltip="Log out"></blu-button>
        </div>
    </div>
        <div class="row" class="dashboard-row">
            <div *ngIf="(isAssetsLoading$ | async)" class="dashboard-side-loader-wrapper">
                <blu-spinner size="50"></blu-spinner>
            </div>
            <div class="col-12 dashboard-asset-table-wrapper" [hidden]="(isAssetsLoading$ | async)">
                <app-asset-table
                    [columns]="assetTableColumns"
                    [assets$]="assets$"
                    [loadingIndicator$]="isAssetsLoading$"
                    #assetTable
                ></app-asset-table>
            </div>
        </div>
    </div>
</div>