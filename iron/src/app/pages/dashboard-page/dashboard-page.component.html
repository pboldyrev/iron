<div class="dashboard-wrapper row m-0">
    <div class="dashboard-side-wrapper col-lg-5 col-12 pb-2">
        <div class="p-4 p-md-5">
            <app-networth
                [totalNetworth]="totalNetworth"
                [isLoading]="isNetworthLoading$ | async"
            ></app-networth>
            <app-value-change
                [timeframes]="networthTimeframes"
                [isLoading]="isNetworthLoading$ | async"
            ></app-value-change>
        </div>
        <div class="dashboard-networth-chart" [hidden]="(isNetworthLoading$ | async)">
            <empty-state 
                *ngIf="((assets$ | async) ?? []).length < 1 && !(isAssetsLoading$ | async)" 
                [variation]="1"
                (addBtnClicked)="onAddAsset()"
            ></empty-state>
            <canvas 
                [hidden]="((assets$ | async) ?? []).length < 1" 
                id="dashboardChart"
            >{{ dashboardChart }}</canvas>
        </div>
    </div>
    <div class="dashboard-content-wrapper col-lg-7 col-12 px-2 px-md-5 py-4">
        <dashboard-top-bar #topBar></dashboard-top-bar>
        <app-error-state *ngIf="loadingFailed; else mainContent"></app-error-state>
        <ng-template #mainContent>
                <app-loading-state *ngIf="(isAssetsLoading$ | async); else loadedContent" class="dashboard-loader-wrapper"></app-loading-state>
                <ng-template #loadedContent>
                    <div class="row g-2 g-sm-3">
                        <onboarding [assets$]="assets$"></onboarding>
                        <empty-state
                            class="mt-5 d-flex justify-content-center"
                            *ngIf="((assets$ | async) ?? []).length < 1 && !(isAssetsLoading$ | async)" 
                            [variation]="2"
                            (addBtnClicked)="onAddAsset()"
                        ></empty-state>
                        <app-ai-feedback
                            *ngIf="((assets$ | async) ?? []).length >= 10"
                            [assets$]="assets$"
                        ></app-ai-feedback>
                        <app-asset-table
                            *ngIf="((assets$ | async) ?? []).length > 0"
                            [columns]="assetTableColumns"
                            [assets$]="assets$"
                            [loadingIndicator$]="isAssetsLoading$"
                            #assetTable
                        ></app-asset-table>
                        <app-account-summary
                            *ngIf="((assets$ | async) ?? []).length >= 3 && showAnalytics"
                            [assets$]="assets$"
                        ></app-account-summary>
                        <div class="d-flex justify-content-center w-100" *ngIf="((assets$ | async) ?? []).length > 1">
                            <blu-button type="secondary" [iconName]="showAnalytics ? 'collapse' : 'show'" (click)="onToggleAnalytics()">
                                <span *ngIf="!showAnalytics">{{ TEXTS.SHOW_CTA }}</span>
                                <span *ngIf="showAnalytics">{{ TEXTS.HIDE_CTA }}</span>
                                <span class="ps-1">{{ TEXTS.SHOW_CTA_END }}</span>
                            </blu-button>
                        </div>
                    </div>
                </ng-template>
        </ng-template>
    </div>
</div>